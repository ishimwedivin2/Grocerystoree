<!--<!DOCTYPE HTML>-->
<!--<html lang="en" xmlns:th="http://www.thymeleaf.org">-->

<!--<head>-->
<!--  &lt;!&ndash; Required meta tags &ndash;&gt;-->
<!--  <meta charset="utf-8">-->
<!--  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">-->

<!--  &lt;!&ndash; Bootstrap CSS &ndash;&gt;-->
<!--  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">-->

<!--  &lt;!&ndash; Chart.js &ndash;&gt;-->
<!--  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>-->
<!--  &lt;!&ndash;    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.1/chart.min.js" integrity="sha512-L0Shl7nXXzIlBSUUPpxrokqq4ojqgZFQczTYlGjzONGTDAcLremjwaWv5A+EDLnxhQzY5xUZPWLOLqYRkY0Cbw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>&ndash;&gt;-->

<!--  <title>Admin Dashboard</title>-->
<!--  <style>-->
<!--    body {-->
<!--        background-color: white; /* Light background for the body */-->
<!--        font-family: Arial, sans-serif; /* Font family */-->
<!--        margin: 0; /* Remove default margin */-->
<!--    }-->

<!--    header {-->
<!--        background-color: #1abc9c; /* Dark background for header */-->
<!--        color: #ffffff; /* White text for header */-->
<!--        padding: 10px 0; /* Padding for header */-->
<!--    }-->

<!--.header-container {-->
<!--    display: flex; /* Use flexbox for layout */-->
<!--    justify-content: space-between; /* Space between items */-->
<!--    align-items: center; /* Center align items vertically */-->
<!--    padding: 10px 30px; /* Increase padding for top/bottom and left/right */-->
<!--    height: 60px; /* Set a specific height for the header */-->
<!--    font-size: 1.5rem; /* Increase font size for header text */-->
<!--}-->

<!--.ms-auto {-->
<!--    margin-left: auto; /* Push this section to the right */-->
<!--}-->



<!--#logo {-->
<!--    font-size: 2rem; /* Increase font size */-->
<!--    font-weight: bold; /* Bold text for logo */-->
<!--    color: white;-->
<!--    text-align: center; /* Center-align text */-->
<!--    display: block; /* Make logo a block element */-->
<!--    margin: 0 auto; /* Center the block element */-->
<!--}-->

<!--.logo-container { /* New class for the container */-->
<!--    text-align: center; /* Center the text inside the container */-->
<!--}-->



<!--    .profile-icon {-->
<!--        width: 40px; /* Width of the profile icon */-->
<!--        height: 40px; /* Height of the profile icon */-->
<!--        border-radius: 50%; /* Circular profile icon */-->
<!--        margin-right: 10px; /* Space between icon and text */-->
<!--    }-->

<!--    .container {-->
<!--        margin-top: 20px; /* Space above the container */-->
<!--        padding: 20px; /* Padding for container */-->
<!--        background-color: #ffffff; /* White background for container */-->
<!--        border-radius: 8px; /* Rounded corners */-->
<!--        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1); /* Shadow effect */-->
<!--    }-->

<!--    .btn-primary {-->
<!--        background-color: #1abc9c; /* Primary button color */-->
<!--        border: none; /* No border */-->
<!--    }-->

<!--    .btn-primary:hover {-->
<!--        background-color: #1abc9c; /* Darker shade on hover */-->
<!--    }-->

<!--    .btn-warning {-->
<!--        background-color: #ffc107; /* Warning button color */-->
<!--        border: none; /* No border */-->
<!--    }-->

<!--    .btn-warning:hover {-->
<!--        background-color: #e0a800; /* Darker shade on hover */-->
<!--    }-->

<!--    .btn-danger {-->
<!--        background-color: #343a40; /* Danger button color */-->
<!--        border: none; /* No border */-->
<!--    }-->

<!--    .btn-danger:hover {-->
<!--        background-color: #c82333; /* Darker shade on hover */-->
<!--    }-->
<!--    .mb-3 {-->
<!--    display: flex;             /* Arrange buttons in a row */-->
<!--    gap: 10px;                 /* Space between each button */-->
<!--    justify-content: center;   /* Center align buttons */-->
<!--    margin-bottom: 20px;       /* Extra space below the container */-->
<!--  }-->

<!--  /* Button styling for a more refined look */-->
<!--  .mb-3 .btn-primary {-->
<!--    font-weight: bold;        /* Bold font for buttons */-->
<!--    padding: 10px 20px;       /* Larger padding for buttons */-->
<!--    transition: background-color 0.3s ease; /* Smooth hover transition */-->
<!--  }-->

<!--  /* Hover effect to enhance button interaction */-->
<!--  .mb-3 .btn-primary:hover {-->
<!--    background-color: #17a085; /* Slightly darker green on hover */-->
<!--  }-->
<!--    .table {-->
<!--    width: 100%; /* Full width */-->
<!--    margin-top: 1rem; /* Space above the table */-->
<!--    border-collapse: collapse; /* Merge table borders */-->
<!--    font-size: 0.9rem; /* Slightly smaller font */-->
<!--    color: #343a40; /* Dark text color */-->
<!--}-->

<!--.table thead {-->
<!--    background-color: #343a40; /* Dark background for the header */-->
<!--    color: white; /* White text for header */-->
<!--}-->

<!--.table th, .table td {-->
<!--    padding: 10px; /* Padding for table cells */-->
<!--    border: 1px solid #ddd; /* Light border for table cells */-->
<!--    text-align: center; /* Center-align text */-->
<!--    vertical-align: middle; /* Vertically center text */-->
<!--}-->

<!--.table th a {-->
<!--    color: white; /* White color for header links */-->
<!--    text-decoration: none; /* Remove underline from links */-->
<!--}-->

<!--.table th a:hover {-->
<!--    color: #ffc107; /* Highlight color for hover */-->
<!--    text-decoration: underline; /* Underline on hover */-->
<!--}-->

<!--.table-striped tbody tr:nth-of-type(odd) {-->
<!--    background-color: #f9f9f9; /* Light gray for alternating rows */-->
<!--}-->

<!--.table-bordered {-->
<!--    border: 2px solid #ddd; /* Outer border for the table */-->
<!--    border-radius: 8px; /* Rounded corners */-->
<!--}-->

<!--.table img {-->
<!--    border-radius: 50%; /* Circular images */-->
<!--    object-fit: cover; /* Crop images to fit */-->
<!--}-->

<!--.pagination .page-link {-->
<!--    color: #343a40; /* Dark color for pagination links */-->
<!--}-->

<!--.pagination .page-item.active .page-link {-->
<!--    background-color: #1abc9c; /* Highlight active page */-->
<!--    border-color: #1abc9c; /* Match border to background */-->
<!--}-->

<!--.pagination .page-link:hover {-->
<!--    color: #17a085; /* Hover color */-->
<!--}-->
<!--    /* Chart Container Styling */-->
<!--#chart {-->
<!--    margin: 20px auto;-->
<!--    max-width: 600px;-->
<!--    height: 400px;-->
<!--    display: block;-->
<!--}-->

<!--/* Chart Background and Border Styling */-->
<!--.chartjs-render-monitor {-->
<!--    background-color: #f0f8ff; /* Light blue background for chart */-->
<!--    border-radius: 12px;-->
<!--    box-shadow: 0 4px 15px rgba(0, 123, 255, 0.2); /* Blue shadow */-->
<!--}-->

<!--/* Chart Legend Styling */-->
<!--.chart-legend {-->
<!--    text-align: center;-->
<!--    font-weight: bold;-->
<!--    color: #007bff; /* Blue color for legend text */-->
<!--}-->

<!--/* Tooltip Styling */-->
<!--.chartjs-tooltip {-->
<!--    background: rgba(0, 123, 255, 0.9); /* Deep blue for tooltip background */-->
<!--    color: #f8f9fa; /* Light text color for tooltip */-->
<!--    border-radius: 6px;-->
<!--    padding: 8px 12px;-->
<!--    font-size: 0.95rem;-->
<!--}-->


<!--  </style>-->
<!--</head>-->

<!--<body>-->

<!--<header>-->
<!--  <div class="header-container">-->
<!--    <div class="logo-container">-->
<!--      <h1 id="logo">Grocery Store â˜†Admin Control</h1>-->
<!--    </div>-->

<!--    <div class="ms-auto d-flex align-items-center">-->
<!--      <a th:href="@{/admin}" class="d-flex align-items-center me-3">-->
<!--        <img src="ggg.jpg" alt="Profile" class="profile-icon"> &lt;!&ndash; Replace with actual image path &ndash;&gt;-->
<!--      </a>-->
<!--      <a th:href="@{/logout}" class="btn btn-danger">Logout</a>-->
<!--    </div>-->
<!--  </div>-->
<!--</header>-->


<!--<div class="container mt-4" >-->
<!--  <div class="mb-3">-->
<!--    <a th:href="@{/admin/add}" class="btn btn-primary">Add User</a>-->
<!--    <a th:href="@{/admin/search}" class="btn btn-primary">Search</a>-->
<!--    <a th:href="@{/admin/download/users}"  class="btn btn-primary">Download</a>-->
<!--    <a th:href="@{/admin/upload}"  class="btn btn-primary">Upload</a>-->
<!--  </div>-->
<!--  <table class="table table-bordered table-striped">-->
<!--    <thead class="table-dark">-->
<!--    <tr>-->
<!--      <th><a th:href="@{/admin(sortBy='username', pageNo=${currentPage}, pageSize=${pageSize})}">Username</a></th>-->
<!--      <th><a th:href="@{/admin(sortBy='firstName', pageNo=${currentPage}, pageSize=${pageSize})}">First Name</a></th>-->
<!--      <th><a th:href="@{/admin(sortBy='lastName', pageNo=${currentPage}, pageSize=${pageSize})}">Last Name</a></th>-->
<!--      <th><a th:href="@{/admin(sortBy='email', pageNo=${currentPage}, pageSize=${pageSize})}">Email</a></th>-->
<!--      <th><a th:href="@{/admin(sortBy='phoneNumber', pageNo=${currentPage}, pageSize=${pageSize})}">Phone Number</a></th>-->
<!--      <th>Profile Picture</th>-->
<!--      <th><a th:href="@{/admin(sortBy='role', pageNo=${currentPage}, pageSize=${pageSize})}">Role</a></th>-->
<!--      <th>Actions</th>-->
<!--    </tr>-->
<!--    </thead>-->

<!--    <tbody>-->
<!--    <tr th:each="user : ${users}">-->
<!--      <td th:text="${user.username}"></td>-->
<!--      <td th:text="${user.firstName}"></td>-->
<!--      <td th:text="${user.lastName}"></td>-->
<!--      <td th:text="${user.email}"></td>-->
<!--      <td th:text="${user.phoneNumber}"></td>-->
<!--      <td><img th:src="${user.profilePicture}" alt="Profile Picture" width="40" height="40"></td>-->
<!--      <td th:text="${user.role}"></td>-->
<!--      <td>-->
<!--        <a th:href="@{/admin/users/edit/{id}(id=${user.id})}" class="btn btn-warning btn-sm">Edit</a>-->
<!--        <form th:action="@{/admin/users/delete/{id}(id=${user.id})}" method="post" style="display:inline;">-->
<!--          <button type="submit" class="btn btn-danger btn-sm">Delete</button>-->
<!--        </form>-->
<!--      </td>-->
<!--    </tr>-->
<!--    </tbody>-->
<!--  </table>-->

<!--  &lt;!&ndash; Pagination Controls &ndash;&gt;-->
<!--  <nav aria-label="Page navigation">-->
<!--    <ul class="pagination justify-content-center">-->
<!--      <li class ="page-item" th:classappend="${currentPage == 0} ? 'disabled' : ''">-->
<!--        <a class="page-link" th:href="@{/admin(pageNo=${currentPage - 1}, pageSize=${pageSize})}">Previous</a>-->
<!--      </li>-->
<!--      <li class="page-item" th:each="i : ${#numbers.sequence(0, totalPages - 1)}" th:classappend="${currentPage == i} ? 'active' : ''">-->
<!--        <a class="page-link" th:href="@{/admin(pageNo=${i}, pageSize=${pageSize})}" th:text="${i + 1}">1</a>-->
<!--      </li>-->
<!--      <li class="page-item" th:classappend="${currentPage == totalPages - 1} ? 'disabled' : ''">-->
<!--        <a class="page-link" th:href="@{/admin(pageNo=${currentPage + 1}, pageSize=${pageSize})}">Next</a>-->
<!--      </li>-->

<!--    </ul>-->
<!--  </nav>-->
<!--  x-->
<!--  &lt;!&ndash; Chart &ndash;&gt;-->
<!--  <canvas id="chart" width="400" height="200"></canvas>-->

<!--  <script>-->
<!--    // Fetch user role statistics-->
<!--    fetch('/admin/user-role-stats')-->
<!--        .then(response => response.json())-->
<!--        .then(data => {-->
<!--            const roles = Object.keys(data);-->
<!--            const roleCounts = Object.values(data);-->

<!--            // Create the chart-->
<!--            const ctx = document.getElementById('chart').getContext('2d');-->
<!--            new Chart(ctx, {-->
<!--                type: 'bar',-->
<!--                data: {-->
<!--                    labels: roles,-->
<!--                    datasets: [{-->
<!--                        label: 'Number of Users per Role',-->
<!--                        data: roleCounts,-->
<!--                        backgroundColor: 'rgba(75, 192, 192, 0.2)',-->
<!--                        borderColor: 'rgba(75, 192, 192, 1)',-->
<!--                        borderWidth: 1-->
<!--                    }]-->
<!--                },-->
<!--                options: {-->
<!--                    scales: {-->
<!--                        y: {-->
<!--                            beginAtZero: true-->
<!--                        }-->
<!--                    }-->
<!--                }-->
<!--            });-->
<!--        })-->
<!--        .catch(error => console.error('Error fetching user role statistics:', error));-->
<!--  </script>-->

<!--</div>-->

<!--</body>-->
<!--</html>-->

<!DOCTYPE HTML>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <title>Admin Dashboard</title>
  <style>
    /* Existing styles here */

    body {
        background-color: white; /* Light background for the body */
        font-family: Arial, sans-serif; /* Font family */
        margin: 0; /* Remove default margin */
    }

    header {
        background-color: #1abc9c; /* Dark background for header */
        color: #ffffff; /* White text for header */
        padding: 10px 0; /* Padding for header */
    }

.header-container {
    display: flex; /* Use flexbox for layout */
    justify-content: space-between; /* Space between items */
    align-items: center; /* Center align items vertically */
    padding: 10px 30px; /* Increase padding for top/bottom and left/right */
    height: 60px; /* Set a specific height for the header */
    font-size: 1.5rem; /* Increase font size for header text */
}

.ms-auto {
    margin-left: auto; /* Push this section to the right */
}



#logo {
    font-size: 2rem; /* Increase font size */
    font-weight: bold; /* Bold text for logo */
    color: white;
    text-align: center; /* Center-align text */
    display: block; /* Make logo a block element */
    margin: 0 auto; /* Center the block element */
}

.logo-container { /* New class for the container */
    text-align: center; /* Center the text inside the container */
}



    .profile-icon {
        width: 40px; /* Width of the profile icon */
        height: 40px; /* Height of the profile icon */
        border-radius: 50%; /* Circular profile icon */
        margin-right: 10px; /* Space between icon and text */
    }

    .container {
        margin-top: 20px; /* Space above the container */
        padding: 20px; /* Padding for container */
        background-color: #ffffff; /* White background for container */
        border-radius: 8px; /* Rounded corners */
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1); /* Shadow effect */
    }

    .btn-primary {
        background-color: #1abc9c; /* Primary button color */
        border: none; /* No border */
    }

    .btn-primary:hover {
        background-color: #1abc9c; /* Darker shade on hover */
    }

    .btn-warning {
        background-color: #ffc107; /* Warning button color */
        border: none; /* No border */
    }

    .btn-warning:hover {
        background-color: #e0a800; /* Darker shade on hover */
    }

    .btn-danger {
        background-color: #343a40; /* Danger button color */
        border: none; /* No border */
    }

    .btn-danger:hover {
        background-color: #c82333; /* Darker shade on hover */
    }
    .mb-3 {
    display: flex;             /* Arrange buttons in a row */
    gap: 10px;                 /* Space between each button */
    justify-content: center;   /* Center align buttons */
    margin-bottom: 20px;       /* Extra space below the container */
  }

  /* Button styling for a more refined look */
  .mb-3 .btn-primary {
    font-weight: bold;        /* Bold font for buttons */
    padding: 10px 20px;       /* Larger padding for buttons */
    transition: background-color 0.3s ease; /* Smooth hover transition */
  }

  /* Hover effect to enhance button interaction */
  .mb-3 .btn-primary:hover {
    background-color: #17a085; /* Slightly darker green on hover */
  }
    .table {
    width: 100%; /* Full width */
    margin-top: 1rem; /* Space above the table */
    border-collapse: collapse; /* Merge table borders */
    font-size: 0.9rem; /* Slightly smaller font */
    color: #343a40; /* Dark text color */
}

.table thead {
    background-color: #343a40; /* Dark background for the header */
    color: white; /* White text for header */
}

.table th, .table td {
    padding: 10px; /* Padding for table cells */
    border: 1px solid #ddd; /* Light border for table cells */
    text-align: center; /* Center-align text */
    vertical-align: middle; /* Vertically center text */
}

.table th a {
    color: white; /* White color for header links */
    text-decoration: none; /* Remove underline from links */
}

.table th a:hover {
    color: #ffc107; /* Highlight color for hover */
    text-decoration: underline; /* Underline on hover */
}

.table-striped tbody tr:nth-of-type(odd) {
    background-color: #f9f9f9; /* Light gray for alternating rows */
}

.table-bordered {
    border: 2px solid #ddd; /* Outer border for the table */
    border-radius: 8px; /* Rounded corners */
}

.table img {
    border-radius: 50%; /* Circular images */
    object-fit: cover; /* Crop images to fit */
}

.pagination .page-link {
    color: #343a40; /* Dark color for pagination links */
}

.pagination .page-item.active .page-link {
    background-color: #1abc9c; /* Highlight active page */
    border-color: #1abc9c; /* Match border to background */
}

.pagination .page-link:hover {
    color: #17a085; /* Hover color */
}
    /* Chart Container Styling */
#chart {
    margin: 20px auto;
    max-width: 600px;
    height: 400px;
    display: block;
}

/* Chart Background and Border Styling */
.chartjs-render-monitor {
    background-color: #f0f8ff; /* Light blue background for chart */
    border-radius: 12px;
    box-shadow: 0 4px 15px rgba(0, 123, 255, 0.2); /* Blue shadow */
}

/* Chart Legend Styling */
.chart-legend {
    text-align: center;
    font-weight: bold;
    color: #007bff; /* Blue color for legend text */
}

/* Tooltip Styling */
.chartjs-tooltip {
    background: rgba(0, 123, 255, 0.9); /* Deep blue for tooltip background */
    color: #f8f9fa; /* Light text color for tooltip */
    border-radius: 6px;
    padding: 8px 12px;
    font-size: 0.95rem;
}

  </style>

  <!-- Translation Script -->
  <script>
    const translations = {
      en: {
        "Add User": "Add User",
        "Search": "Search",
        "Download": "Download",
        "Upload": "Upload",
        "Username": "Username",
        "First Name": "First Name",
        "Last Name": "Last Name",
        "Email": "Email",
        "Phone Number": "Phone Number",
        "Role": "Role",
        "Actions": "Actions",
        "Edit": "Edit",
        "Delete": "Delete",
        "Logout": "Logout",
        "Number of Users per Role": "Number of Users per Role"
      },
      fr: {
        "Add User": "Ajouter un utilisateur",
        "Search": "Rechercher",
        "Download": "TÃ©lÃ©charger",
        "Upload": "TÃ©lÃ©verser",
        "Username": "Nom d'utilisateur",
        "First Name": "PrÃ©nom",
        "Last Name": "Nom",
        "Email": "E-mail",
        "Phone Number": "NumÃ©ro de tÃ©lÃ©phone",
        "Role": "RÃ´le",
        "Actions": "Actions",
        "Edit": "Modifier",
        "Delete": "Supprimer",
        "Logout": "DÃ©connexion",
        "Number of Users per Role": "Nombre d'utilisateurs par rÃ´le"
      }
    };

    function setLanguage(lang) {
      document.querySelectorAll("[data-translate]").forEach(element => {
        const key = element.getAttribute("data-translate");
        element.textContent = translations[lang][key];
      });
    }

    document.addEventListener("DOMContentLoaded", function() {
      const languageSelect = document.getElementById("languageSelect");
      languageSelect.addEventListener("change", function() {
        setLanguage(this.value);
      });
    });
  </script>
</head>

<body>

<header>
  <div class="header-container">
    <div class="logo-container">
      <h1 id="logo">Grocery Store â˜†Admin Control</h1>
    </div>

    <div class="ms-auto d-flex align-items-center">
      <select id="languageSelect" class="form-select form-select-sm me-3">
        <option value="en">English</option>
        <option value="fr">FranÃ§ais</option>
      </select>
      <a th:href="@{/admin}" class="d-flex align-items-center me-3">
        <img src="ggg.jpg" alt="Profile" class="profile-icon"> <!-- Replace with actual image path -->
      </a>
      <a th:href="@{/logout}" class="btn btn-danger" data-translate="Logout">Logout</a>
    </div>
  </div>
</header>

<div class="container mt-4">
  <div class="mb-3">
    <a th:href="@{/admin/add}" class="btn btn-primary" data-translate="Add User">Add User</a>
    <a th:href="@{/admin/search}" class="btn btn-primary" data-translate="Search">Search</a>
    <a th:href="@{/admin/download/users}" class="btn btn-primary" data-translate="Download">Download</a>
    <a th:href="@{/admin/upload}" class="btn btn-primary" data-translate="Upload">Upload</a>
  </div>

  <table class="table table-bordered table-striped">
    <thead class="table-dark">
    <tr>
      <th><a th:href="@{/admin(sortBy='username', pageNo=${currentPage}, pageSize=${pageSize})}" data-translate="Username">Username</a></th>
      <th><a th:href="@{/admin(sortBy='firstName', pageNo=${currentPage}, pageSize=${pageSize})}" data-translate="First Name">First Name</a></th>
      <th><a th:href="@{/admin(sortBy='lastName', pageNo=${currentPage}, pageSize=${pageSize})}" data-translate="Last Name">Last Name</a></th>
      <th><a th:href="@{/admin(sortBy='email', pageNo=${currentPage}, pageSize=${pageSize})}" data-translate="Email">Email</a></th>
      <th><a th:href="@{/admin(sortBy='phoneNumber', pageNo=${currentPage}, pageSize=${pageSize})}" data-translate="Phone Number">Phone Number</a></th>
      <th data-translate="Profile Picture">Profile Picture</th>
      <th><a th:href="@{/admin(sortBy='role', pageNo=${currentPage}, pageSize=${pageSize})}" data-translate="Role">Role</a></th>
      <th data-translate="Actions">Actions</th>
    </tr>
    </thead>

    <tbody>
    <tr th:each="user : ${users}">
      <td th:text="${user.username}"></td>
      <td th:text="${user.firstName}"></td>
      <td th:text="${user.lastName}"></td>
      <td th:text="${user.email}"></td>
      <td th:text="${user.phoneNumber}"></td>
      <td><img th:src="${user.profilePicture}" alt="Profile Picture" width="40" height="40"></td>
      <td th:text="${user.role}"></td>
      <td>
        <a th:href="@{/admin/users/edit/{id}(id=${user.id})}" class="btn btn-warning btn-sm" data-translate="Edit">Edit</a>
        <form th:action="@{/admin/users/delete/{id}(id=${user.id})}" method="post" style="display:inline;">
          <button type="submit" class="btn btn-danger btn-sm" data-translate="Delete">Delete</button>
        </form>
      </td>
    </tr>
    </tbody>
  </table>

  <!-- Chart -->
  <canvas id="chart" width="400" height="200"></canvas>

  <script>
    // Fetch user role statistics
    fetch('/admin/user-role-stats')
        .then(response => response.json())
        .then(data => {
            const roles = Object.keys(data);
            const roleCounts = Object.values(data);

            // Create the chart
            const ctx = document.getElementById('chart').getContext('2d');
            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: roles,
                    datasets: [{
                        label: translations['en']['Number of Users per Role'],
                        data: roleCounts,
                        backgroundColor: 'rgba(75, 192, 192, 0.2)',
                        borderColor: 'rgba(75, 192, 192, 1)',
                        borderWidth: 1
                    }]
                },
                options: {
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });
        })
        .catch(error => console.error('Error fetching user role statistics:', error));
  </script>

</div>

</body>
</html>
